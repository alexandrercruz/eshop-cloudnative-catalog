<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">

    <object name="BootstrapperService" type="eShopCloudNative.Architecture.Bootstrap.BootstrapperService, eShopCloudNative.Architecture.Bootstrap">
        
        <property name="Services">
            <list element-type="eShopCloudNative.Architecture.Bootstrap.IBootstrapperService, eShopCloudNative.Architecture.Bootstrap">

                <object type="eShopCloudNative.Catalog.Bootstrapper.Postgres.PostgresBootstrapperService, eShopCloudNative.Catalog.Bootstrapper">
                    <property name="Configuration" ref="Configuration" />
                    <property name="ServerEndpoint">
                        <object type="System.Net.DnsEndPoint, System.Net.Primitives">
                            <constructor-arg name="host" value="postgres" />
                            <constructor-arg name="port" value="5432" />
                        </object>
                    </property>                    
                    <property name="SysAdminUser">
                        <object type="System.Net.NetworkCredential, System.Net.Primitives">
                            <constructor-arg name="userName" value="eshop_user" />
                            <constructor-arg name="password" value="eshop_pass" />
                        </object>
                    </property>
                    <property name="InitialDatabase" value="eshop_db" />
                    <property name="AppUser">
                        <object type="System.Net.NetworkCredential, System.Net.Primitives">
                            <constructor-arg name="userName" value="catalog_user" />
                            <constructor-arg name="password" value="catalog_pass" />
                        </object>
                    </property>
                    <property name="DatabaseToCreate" value="eshop_catalog_db" />
                </object>

                <object type="eShopCloudNative.Architecture.Minio.MinioBootstrapperService, eShopCloudNative.Architecture.Bootstrap">
                    <property name="Configuration" ref="Configuration" />
                    <property name="WithSSL" value="false" />
                    <property name="BucketsToCreate">
                        <list element-type="eShopCloudNative.Architecture.Minio.MinioBucket, eShopCloudNative.Architecture.Bootstrap">

                            <object type="eShopCloudNative.Architecture.Minio.MinioBucket, eShopCloudNative.Architecture.Bootstrap">
                                <property name="BucketName" value="catalog-images" />
                                <property name="Policy" >
                                    <object type="eShopCloudNative.Architecture.Minio.PublicPolicy, eShopCloudNative.Architecture.Bootstrap" >
                                        <property name="BucketName" value="catalog-images" />
                                    </object>
                                </property>
                            </object>

                            <object type="eShopCloudNative.Architecture.Minio.MinioBucket, eShopCloudNative.Architecture.Bootstrap">
                                <property name="BucketName" value="catalog-assets" />
                                <property name="Policy" >
                                    <object type="eShopCloudNative.Architecture.Minio.PublicPolicy, eShopCloudNative.Architecture.Bootstrap" >
                                        <property name="BucketName" value="catalog-assets" />
                                    </object>
                                </property>
                            </object>
                            
                        </list>
                    </property>
                    <property name="ServerEndpoint">
                        <object type="System.Net.DnsEndPoint, System.Net.Primitives">
                            <constructor-arg name="host" value="minio" />
                            <constructor-arg name="port" value="9000" />
                        </object>
                    </property>
                    <property name="Credentials">
                        <object type="System.Net.NetworkCredential, System.Net.Primitives">
                            <constructor-arg name="userName" value="minioadmin" />
                            <constructor-arg name="password" value="minioadmin" />
                        </object>
                    </property>
                </object>

                <object type="eShopCloudNative.Catalog.Bootstrapper.Sample.SampleDataBootstrapperService, eShopCloudNative.Catalog.Bootstrapper">
                    <property name="Configuration" ref="Configuration" />
                    <property name="WithSSL" value="false" />
                    <property name="BucketName" value="catalog-images" />
                    <property name="ServerEndpoint">
                        <object type="System.Net.DnsEndPoint, System.Net.Primitives">
                            <constructor-arg name="host" value="minio" />
                            <constructor-arg name="port" value="9000" />
                        </object>
                    </property>
                    <property name="Credentials">
                        <object type="System.Net.NetworkCredential, System.Net.Primitives">
                            <constructor-arg name="userName" value="minioadmin" />
                            <constructor-arg name="password" value="minioadmin" />
                        </object>
                    </property>
                </object>
                
            </list>
        </property>
       
    </object>
</objects>


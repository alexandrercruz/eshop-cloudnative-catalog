@using eShopCloudNative.Catalog.Dto
@using eShopCloudNative.Catalog.Services
@{
    IPublicCatalogService publicCatalogService = this.ViewBag.publicCatalogService;

    IEnumerable<CategoryDto> categorias = null; 
    try
    {
        categorias = await publicCatalogService.GetHomeCatalogAsync();
    }
    catch (Exception)
    {
        categorias = Array.Empty<CategoryDto>();
    }

    ViewData["Title"] = "Home Page";
}


@foreach (var category in categorias)
{
    <partial name="../Shared/Shared.Category.cshtml" model="@(category)" />
}